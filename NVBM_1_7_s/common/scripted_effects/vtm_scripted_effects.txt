warlord_setup_effect = {
	activate_law = law_type:law_autocracy 
	activate_law = law_type:law_presidential_republic
	activate_law = law_type:law_peasant_levies
	activate_law = law_type:law_no_social_security
	activate_law = law_type:law_no_police
	activate_law = law_type:law_no_health_system
	activate_law = law_type:law_no_schools
	activate_law = law_type:law_no_home_affairs
	if = {
		limit = {
			NOR = {
				c:MGL ?= this
				c:TUV ?= this
				c:ALI ?= this
			}
		}
		random_character = {
			limit = {
				c:CHI ?= owner
				OR = {
					has_role = general
					AND = {
						PREV = {
							any_scope_state = {
								has_building = building_naval_base
							}
						}
						has_role = admiral
					}
				}
			}
			transfer_character = PREV
			set_character_as_ruler = yes
		}
		if = {
			limit = {
				NOR = {
					country_has_primary_culture = cu:han
					country_has_primary_culture = cu:manchu
				}
			}
			add_primary_culture = cu:han
			if = {
				limit = {
					OR = {
						has_law = law_type:law_ethnostate
						has_law = law_type:law_national_supremacy
					}
				}
				remove_primary_culture = cu:uighur
				remove_primary_culture = cu:tibetan
				remove_primary_culture = cu:mongol
			}
		}

		every_state = {
			limit = {
				owner = {
					OR = {
						country_has_primary_culture = cu:han
						country_has_primary_culture = cu:manchu
					} 
				}
				state_region = {
					OR = {
						is_homeland = cu:han
						is_homeland = cu:manchu
					}
				}
			}
			state_region = {
				hidden_effect = {
					add_claim = root
				}
			}
		}

		every_scope_character = {
			random_list = {
				80 =  {
				}
	
				20 = {
					add_trait = bandit
				}
			}			
		}
		add_modifier = {
			name = warlord_dominance
			months = 121
			is_decaying = yes
		}
	}
}

# Spain
carlist_war_clean_up = {
	set_immune_to_revolutions = no
	remove_global_variable = spa_carlist_score
	remove_global_variable = spa_carlist_score_max
	remove_global_variable = csp_carlist_score
	every_scope_state = {
		remove_variable = state_carlist_war_mini_game
		remove_variable = state_carlist_pacification_complete
		remove_variable = state_carlist_pacification_progress
		remove_variable = state_carlist_incursion_progress
		remove_variable = state_carlist_incursion_cooldown
	}
	every_scope_building = {
		remove_modifier = looted_royal_arsenals
		remove_modifier = looted_supplies
		remove_modifier = ad_hoc_manufacturing
	}
}
